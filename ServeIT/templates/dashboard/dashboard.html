<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    
    <link rel="stylesheet" href={{url_for('static',
    filename='css/dashboard.css')}} />
    <!-- Boxicons CDN Link -->
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <!-- SIDEBAR -->
    <div class="sidebar">
      <div class="logo-details">
        <img class="sb-sd-logo closed" id="logo" src={{url_for('static',
        filename='img/logo/SDB_icon.png')}}>
      </div>
      <ul class="nav-list p-0">
        <li>
          <a href="/dashboard">
            <i class="bx bxs-dashboard"></i>
            <span class="links_name">Dashboard</span>
          </a>
          <span class="tooltip">Dashboard</span>
        </li>
        <li>
          <a href="#">
            <i class="bx bx-list-ul"></i>
            <span class="links_name">Request Feed</span>
          </a>
          <span class="tooltip">Request Feed</span>
        </li>
        <li>
          <a href="#">
            <i class="bx bx-history"></i>
            <span class="links_name">Request History</span>
          </a>
          <span class="tooltip">Request History</span>
        </li>
        <li>
          <a href="/account">
            <i class="bx bx-user-circle"></i>
            <span class="links_name">Account</span>
          </a>
          <span class="tooltip">Account</span>
        </li>
        <li>
          <a href="/logout">
            <i class="bx bx-log-out" id="log_out"></i>
            <span class="links_name">Logout</span>
          </a>
          <span class="tooltip">Logout</span>
        </li>
      </ul>
    </div>
    <!-- DASHBOARD -->
    <div class="dashboard-section">
      <!-- HEADER / NAVBAR -->
      <header class="d-flex flex-wrap justify-content-center pt-2 pb-2">
        <ul class="nav nav-pills me-md-auto">
          <li class="nav-item ms-3 mt-1">
            <img class="icons" src={{url_for('static',
            filename='img/icons/W_menu.png')}} id="btn"/>
          </li>
          <li class="nav-item">
            <a href="/dashboard" class="nav-link">Dashboard</a>
          </li>
        </ul>

        <ul class="nav nav-pills me-5">
          <li class="nav-item">
            <a href="/about" class="nav-link link-light">SEARCH BOX</a>
          </li>
        </ul>
        
      </header>
    <!-- MAIN BODY -->
    
    <div class="container mt-4"> 
      <div class="row">
        <div class="col-9">
          <!-- Date & Time Realtime -->
          <div class="datetime row p-2 m-0 align-items-center">
            <div class="dategreeting col-8 align-items-center">
              <div class="date"></div>
              <p class="greeting"></p>
              
            </div>
            <img class="col-4 align-items-center justify-content-end" id="sd_icon3d" src={{url_for('static',
              filename='img/logo/SD_icon3d.png')}}>
          </div>
          <!-- Total Request and Create Request Row -->
          <div class="row mt-4">
            <!-- TOTAL REQUEST CARD -->
            <div class="col-7">
              <a href="/requestfeed">
              <div class="card TR-card border-0">
                
                <div class="d-flex align-items-center m-3">
                  <div class="TR-number">
                    <h3>
                      526
                    </h3>
                  </div>
                  <div class="TR-info me-md-auto">
                    <h3>
                      Total Request
                    </h3>
                  </div>
                
                  <div class="TR-icon">
                    <img src={{url_for('static',
                    filename='img/icons/B_Task.png')}} alt="tr-icon">
                  </div>
                </div>
                </a>
              </div>
            </div>
            <!-- CREATE REQUEST CARD -->
            <div class="col-5">
              <div class="card CR-card border-0">  
                <a data-bs-toggle="modal" data-bs-target="#CreateModal" data-backdrop="false" style="cursor: pointer;">
                  <div class="d-flex align-items-center m-3">
                    <div class="CR-info me-md-auto">
                      <h3>
                        Create Request
                      </h3>  
                    </div>
                    <div class="CR-icon">
                      <img src={{url_for('static',
                      filename='img/icons/Y_CRicon.png')}} alt="tr-icon">
                    </div>
                </div>
              </a>
              
              </div>
            </div>
            <!-- Button trigger modal -->
            
    
          </div>
          <div class="row mt-4">
            REQUEST FEED
          </div>
          <!-- Profile and Notif Row -->
          <div class="col-3">
        
          </div>   
        </div>
        <!-- SIDE KUAN BASTA KANANG KILID SA REQUEST FEED -->
        <div class="col-3">
          <div class="User-card">
            <div class="user-img d-flex justify-content-center">
              <a href="/account" class=" nav-link link light">
              <img
                class=""
                id="avatar"
                src="https://avatars.dicebear.com/api/avataaars/gay.svg?size=85&style=circle"
              />
              </a>
            </div>
            <div class="user-details d-flex justify-content-center">
              <h2>Badingka?</h2>
            </div>
            <div class="user-cc d-flex justify-content-center">
              <p>TABANG MGA LANGIT</p>
            </div>

            

          </div>
        </div>
      </div>

    </div>
    {% include 'dashboard/CreateModal.html' %}
  </body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Script For Sidebar -->
    <script defer>
      let sidebar = document.querySelector(".sidebar");
      let closeBtn = document.querySelector("#btn");
      closeBtn.addEventListener("click", () => {
        sidebar.classList.toggle("open");
        console.log(btn1);
        console.log(sidebar);
        console.log(sidebar.classList);
      });
    </script>
    <!-- SCRIPT FOR CHANGE AVATAR NOT YET FINISHED -->
    <script>
      function Avatar() {
        // Get the first name from the database
        const firstName = UserRepo.get_fname();

        // Use the first name to generate the avatar URL
        const url = `https://avatars.dicebear.com/api/avataaars/${firstName}?size=50&style=circle.svg`;

        // Update the avatar image
        avatar.src = url;
      }
      window.addEventListener("load", Avatar);
    </script>
    <!-- SCRIPT FOR GETTING REALTIME DATE & User's Firstname -->
    <script>
      var userFirstName = "{{ fname }}";

      const dateElement = document.querySelector(".date");
      const greetingElement = document.querySelector(".greeting");
      const nth = function(d) {
      if (d > 3 && d < 21) return 'th';
      switch (d % 10) {
        case 1:  return "st";
        case 2:  return "nd";
        case 3:  return "rd";
        default: return "th";
        }
      }
      function formatDate(date) {
        const DAYS = [
          "Sunday",
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday"
        ];
        const MONTHS = [
          "January",
          "February",
          "March",
          "April",
          "May",
          "June",
          "July",
          "August",
          "September",
          "October",
          "November",
          "December"
        ];

        return `${DAYS[date.getDay()]}, ${MONTHS[date.getMonth()]} ${date.getDate()}${nth(date.getDate())}`;
      }
      function getGreeting() {
        const now = new Date();
        const hours = now.getHours();
        
        if (hours < 12) {
          return "Good morning, " + userFirstName + "!"; 
        } else if (hours < 18) {
          return "Good afternoon," + userFirstName+ "!";
        } else {
          return "Good evening," + userFirstName+ "!";
        }
      }

      setInterval(() => {
        const now = new Date();


        dateElement.textContent = formatDate(now);
      }, 200);

      setInterval(() => {
      greetingElement.textContent = getGreeting();
    }, 200);
    </script>
    <!-- Show Create Request Modal Type -->
    <script>

    </script>
    
  
</html>
